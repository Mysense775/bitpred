<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–≥–∞–¥–∞–π –∫—É—Ä—Å –ë–∏—Ç–∫–æ–∏–Ω–∞</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #ff9900;
            --secondary-color: #1698d9;
            --success-color: #4CAF50;
            --danger-color: #F44336;
            --dark-color: #212121;
            --light-color: #f5f5f5;
            --gray-color: #9e9e9e;
        }
        
        body {
            font-family: 'Roboto', 'Arial', sans-serif;
            text-align: center;
            padding: 0;
            margin: 0;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            min-height: 100vh;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo-icon {
            font-size: 28px;
            color: var(--primary-color);
        }
        
        h1 {
            font-size: 22px;
            margin: 0;
            color: var(--primary-color);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 15px;
            border-radius: 20px;
        }
        
        .coins {
            color: gold;
            font-weight: bold;
            cursor: pointer;
        }
        
        .shop-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            padding: 25px;
            border-radius: 20px;
            z-index: 1000;
            width: 90%;
            max-width: 400px;
            display: none;
            box-shadow: 0 0 30px rgba(255, 153, 0, 0.5);
            border: 2px solid var(--primary-color);
        }
        
        .shop-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .close-shop {
            background: var(--danger-color);
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
        }
        
        .payment-methods {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .payment-method {
            background: linear-gradient(135deg, #2c3e50 0%, #4ca1af 100%);
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .payment-method:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .payment-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .payment-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .payment-desc {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .coin-packs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 20px 0;
        }
        
        .coin-pack {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid transparent;
        }
        
        .coin-pack:hover {
            border-color: var(--primary-color);
            background: rgba(255, 153, 0, 0.1);
        }
        
        .coin-pack.selected {
            border-color: var(--primary-color);
            background: rgba(255, 153, 0, 0.2);
            transform: scale(1.05);
        }
        
        .coin-amount {
            font-size: 18px;
            font-weight: bold;
            color: gold;
        }
        
        .coin-price {
            font-size: 14px;
            margin-top: 5px;
        }
        
        .buy-button {
            background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: transform 0.3s;
        }
        
        .buy-button:disabled {
            background: var(--gray-color);
            cursor: not-allowed;
        }
        
        .buy-button:hover:not(:disabled) {
            transform: translateY(-2px);
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 999;
            display: none;
        }
        
        .payment-status {
            margin-top: 15px;
            padding: 10px;
            border-radius: 10px;
            display: none;
        }
        
        .payment-success {
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
        }
        
        .payment-error {
            background: rgba(244, 67, 54, 0.2);
            color: #F44336;
        }
        
        .price-display {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .current-price {
            font-size: 28px;
            font-weight: bold;
            margin: 10px 0;
            color: var(--primary-color);
        }
        
        .price-change {
            font-size: 16px;
            padding: 5px 10px;
            border-radius: 20px;
            display: inline-block;
        }
        
        .positive {
            background-color: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
        }
        
        .negative {
            background-color: rgba(244, 67, 54, 0.2);
            color: #F44336;
        }
        
        .timer {
            font-size: 18px;
            margin: 15px 0;
            padding: 10px;
            background: rgba(22, 152, 217, 0.2);
            border-radius: 10px;
        }
        
        .buttons {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            gap: 15px;
        }
        
        button {
            padding: 18px 25px;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        
        #up-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%);
            color: white;
        }
        
        #down-btn {
            background: linear-gradient(135deg, #F44336 0%, #C62828 100%);
            color: white;
        }
        
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }
        
        button:hover:not(:disabled) {
            transform: translateY(-3px);
        }
        
        .result {
            margin-top: 20px;
            padding: 20px;
            border-radius: 15px;
            display: none;
            background: rgba(0, 0, 0, 0.3);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .win {
            border-left: 5px solid var(--success-color);
        }
        
        .lose {
            border-left: 5px solid var(--danger-color);
        }
        
        .score {
            margin-top: 20px;
            font-size: 18px;
            display: flex;
            justify-content: space-around;
        }
        
        .score-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 15px;
            min-width: 100px;
        }
        
        .score-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .history {
            margin-top: 30px;
            text-align: left;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 15px;
            max-height: 200px;
            overflow-y: auto;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .history h3 {
            margin-top: 0;
            color: var(--primary-color);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 10px;
        }
        
        .history-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .history-correct {
            color: var(--success-color);
        }
        
        .history-incorrect {
            color: var(--danger-color);
        }
        
        .chart-container {
            margin-top: 30px;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .tabs {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }
        
        .tab {
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            flex: 1;
            margin: 0 5px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .tab.active {
            background: rgba(22, 152, 217, 0.3);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .leaderboard {
            margin-top: 20px;
            text-align: left;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 15px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .leaderboard-rank {
            width: 30px;
            text-align: center;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .leaderboard-name {
            flex: 1;
            padding: 0 10px;
        }
        
        .leaderboard-score {
            font-weight: bold;
        }
        
        .add-coins-btn {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: black;
            padding: 8px 12px;
            border-radius: 15px;
            font-size: 12px;
            margin-left: 8px;
            cursor: pointer;
            border: none;
            font-weight: bold;
        }
        
        @media (max-width: 480px) {
            .buttons {
                flex-direction: column;
            }
            
            .score {
                flex-direction: column;
                gap: 10px;
            }
            
            .score-item {
                width: 100%;
                box-sizing: border-box;
            }
            
            .coin-packs {
                grid-template-columns: 1fr;
            }
            
            .payment-methods {
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">‚Çø</div>
                <h1>–ë–∏—Ç–∫–æ–∏–Ω –ü—Ä–æ–≥–Ω–æ–∑</h1>
            </div>
            <div class="user-info">
                <span id="user-name">–ò–≥—Ä–æ–∫</span>
                <span class="coins" onclick="openShop()">
                    ü™ô <span id="user-coins">100</span>
                    <button class="add-coins-btn">+</button>
                </span>
            </div>
        </header>
        
        <!-- –ú–∞–≥–∞–∑–∏–Ω -->
        <div class="overlay" id="overlay" onclick="closeShop()"></div>
        <div class="shop-container" id="shop-container">
            <div class="shop-header">
                <h2>–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</h2>
                <button class="close-shop" onclick="closeShop()">√ó</button>
            </div>
            
            <div class="payment-methods">
                <div class="payment-method" onclick="selectPaymentMethod('card')">
                    <div class="payment-icon">üí≥</div>
                    <div class="payment-name">–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞</div>
                    <div class="payment-desc">Visa, Mastercard, –ú–ò–†</div>
                </div>
                
                <div class="payment-method" onclick="selectPaymentMethod('yoomoney')">
                    <div class="payment-icon">üí∞</div>
                    <div class="payment-name">–ÆMoney</div>
                    <div class="payment-desc">–ö–æ—à–µ–ª–µ–∫ –Ø–Ω–¥–µ–∫—Å.–î–µ–Ω–µ–≥</div>
                </div>
                
                <div class="payment-method" onclick="selectPaymentMethod('qiwi')">
                    <div class="payment-icon">ü•ù</div>
                    <div class="payment-name">QIWI</div>
                    <div class="payment-desc">–ö–æ—à–µ–ª–µ–∫ QIWI</div>
                </div>
                
                <div class="payment-method" onclick="selectPaymentMethod('crypto')">
                    <div class="payment-icon">‚Çø</div>
                    <div class="payment-name">–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞</div>
                    <div class="payment-desc">BTC, ETH, USDT</div>
                </div>
            </div>
            
            <h3>–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–∫–µ—Ç –º–æ–Ω–µ—Ç:</h3>
            <div class="coin-packs">
                <div class="coin-pack" onclick="selectCoinPack(100, 100)">
                    <div class="coin-amount">100 ü™ô</div>
                    <div class="coin-price">100 ‚ÇΩ</div>
                </div>
                <div class="coin-pack" onclick="selectCoinPack(500, 450)">
                    <div class="coin-amount">500 ü™ô</div>
                    <div class="coin-price">450 ‚ÇΩ</div>
                </div>
                <div class="coin-pack" onclick="selectCoinPack(1000, 800)">
                    <div class="coin-amount">1000 ü™ô</div>
                    <div class="coin-price">800 ‚ÇΩ</div>
                </div>
                <div class="coin-pack" onclick="selectCoinPack(2000, 1500)">
                    <div class="coin-amount">2000 ü™ô</div>
                    <div class="coin-price">1500 ‚ÇΩ</div>
                </div>
            </div>
            
            <button class="buy-button" id="buy-button" onclick="processPayment()" disabled>
                –ö—É–ø–∏—Ç—å <span id="selected-amount">0</span> –º–æ–Ω–µ—Ç –∑–∞ <span id="selected-price">0</span> ‚ÇΩ
            </button>
            
            <div class="payment-status" id="payment-status"></div>
        </div>
        
        <div class="price-display">
            <div>–¢–µ–∫—É—â–∏–π –∫—É—Ä—Å BTC/USD</div>
            <div class="current-price" id="current-price">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            <div class="price-change" id="price-change">+0.00% (24—á)</div>
        </div>
        
        <div class="timer" id="timer">–î–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 60 —Å–µ–∫</div>
        
        <div class="buttons">
            <button id="up-btn" onclick="makePrediction('up')">‚ñ≤ –í—ã—Ä–∞—Å—Ç–µ—Ç</button>
            <button id="down-btn" onclick="makePrediction('down')">‚ñº –£–ø–∞–¥–µ—Ç</button>
        </div>
        
        <div class="result" id="result"></div>
        
        <div class="score">
            <div class="score-item">
                <div>–ü—Ä–∞–≤–∏–ª—å–Ω–æ</div>
                <div class="score-value" id="correct-guesses">0</div>
            </div>
            <div class="score-item">
                <div>–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ</div>
                <div class="score-value" id="incorrect-guesses">0</div>
            </div>
            <div class="score-item">
                <div>–¢–æ—á–Ω–æ—Å—Ç—å</div>
                <div class="score-value" id="accuracy">0%</div>
            </div>
        </div>
        
        <div class="tabs">
            <div class="tab active" onclick="switchTab(0)">–ò—Å—Ç–æ—Ä–∏—è</div>
            <div class="tab" onclick="switchTab(1)">–ì—Ä–∞—Ñ–∏–∫</div>
            <div class="tab" onclick="switchTab(2)">–õ–∏–¥–µ—Ä—ã</div>
        </div>
        
        <div class="tab-content active">
            <div class="history">
                <h3>–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–≥–Ω–æ–∑–æ–≤</h3>
                <div id="history-list"></div>
            </div>
        </div>
        
        <div class="tab-content">
            <div class="chart-container">
                <canvas id="price-chart"></canvas>
            </div>
        </div>
        
        <div class="tab-content">
            <div class="leaderboard">
                <h3>–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</h3>
                <div id="leaderboard-list"></div>
            </div>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.enableClosingConfirmation();
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const currentPriceElement = document.getElementById('current-price');
        const priceChangeElement = document.getElementById('price-change');
        const timerElement = document.getElementById('timer');
        const resultElement = document.getElementById('result');
        const correctGuessesElement = document.getElementById('correct-guesses');
        const incorrectGuessesElement = document.getElementById('incorrect-guesses');
        const accuracyElement = document.getElementById('accuracy');
        const upButton = document.getElementById('up-btn');
        const downButton = document.getElementById('down-btn');
        const historyListElement = document.getElementById('history-list');
        const leaderboardListElement = document.getElementById('leaderboard-list');
        const userCoinsElement = document.getElementById('user-coins');
        const userNameElement = document.getElementById('user-name');
        const shopContainer = document.getElementById('shop-container');
        const overlay = document.getElementById('overlay');
        const buyButton = document.getElementById('buy-button');
        const selectedAmount = document.getElementById('selected-amount');
        const selectedPrice = document.getElementById('selected-price');
        const paymentStatus = document.getElementById('payment-status');
        
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã
        let currentPrice = 0;
        let nextPrice = 0;
        let timeLeft = 60;
        let timerInterval;
        let correctGuesses = 0;
        let incorrectGuesses = 0;
        let canPredict = true;
        let predictionHistory = [];
        let priceHistory = [];
        let userCoins = 100;
        let priceChart = null;
        
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π
        let selectedPaymentMethod = null;
        let selectedCoinAmount = 0;
        let selectedCoinPrice = 0;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        async function initGame() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            loadUserData();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é —Ü–µ–Ω
            await loadPriceHistory();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É
            await fetchBitcoinPrice();
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä
            startTimer();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤
            loadLeaderboard();
        }
        
        // –û—Ç–∫—Ä—ã—Ç—å –º–∞–≥–∞–∑–∏–Ω
        function openShop() {
            shopContainer.style.display = 'block';
            overlay.style.display = 'block';
            document.body.style.overflow = 'hidden';
            resetPaymentSelection();
        }
        
        // –ó–∞–∫—Ä—ã—Ç—å –º–∞–≥–∞–∑–∏–Ω
        function closeShop() {
            shopContainer.style.display = 'none';
            overlay.style.display = 'none';
            document.body.style.overflow = 'auto';
            resetPaymentSelection();
        }
        
        // –°–±—Ä–æ—Å –≤—ã–±–æ—Ä–∞ –ø–ª–∞—Ç–µ–∂–∞
        function resetPaymentSelection() {
            selectedPaymentMethod = null;
            selectedCoinAmount = 0;
            selectedCoinPrice = 0;
            
            // –°–±—Ä–æ—Å —Å—Ç–∏–ª–µ–π
            document.querySelectorAll('.payment-method').forEach(method => {
                method.style.borderColor = 'transparent';
                method.style.background = 'linear-gradient(135deg, #2c3e50 0%, #4ca1af 100%)';
            });
            
            document.querySelectorAll('.coin-pack').forEach(pack => {
                pack.classList.remove('selected');
            });
            
            buyButton.disabled = true;
            selectedAmount.textContent = '0';
            selectedPrice.textContent = '0';
            paymentStatus.style.display = 'none';
        }
        
        // –í—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ –æ–ø–ª–∞—Ç—ã
        function selectPaymentMethod(method) {
            selectedPaymentMethod = method;
            
            // –°–±—Ä–æ—Å —Å—Ç–∏–ª–µ–π —É –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤
            document.querySelectorAll('.payment-method').forEach(m => {
                m.style.borderColor = 'transparent';
                m.style.background = 'linear-gradient(135deg, #2c3e50 0%, #4ca1af 100%)';
            });
            
            // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞
            const selectedElement = event.currentTarget;
            selectedElement.style.borderColor = 'var(--primary-color)';
            selectedElement.style.background = 'linear-gradient(135deg, #3a506b 0%, #5bc0be 100%)';
            
            checkPaymentReady();
        }
        
        // –í—ã–±–æ—Ä –ø–∞–∫–µ—Ç–∞ –º–æ–Ω–µ—Ç
        function selectCoinPack(amount, price) {
            selectedCoinAmount = amount;
            selectedCoinPrice = price;
            
            // –°–±—Ä–æ—Å —Å—Ç–∏–ª–µ–π —É –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤
            document.querySelectorAll('.coin-pack').forEach(pack => {
                pack.classList.remove('selected');
            });
            
            // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞
            event.currentTarget.classList.add('selected');
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∫–Ω–æ–ø–∫–∏
            selectedAmount.textContent = amount;
            selectedPrice.textContent = price;
            
            checkPaymentReady();
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ
        function checkPaymentReady() {
            if (selectedPaymentMethod && selectedCoinAmount > 0) {
                buyButton.disabled = false;
            } else {
                buyButton.disabled = true;
            }
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞
        function processPayment() {
            if (!selectedPaymentMethod || selectedCoinAmount === 0) {
                showPaymentStatus('error', '–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã –∏ –ø–∞–∫–µ—Ç –º–æ–Ω–µ—Ç');
                return;
            }
            
            // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –≤–æ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
            buyButton.disabled = true;
            buyButton.textContent = '–û–±—Ä–∞–±–æ—Ç–∫–∞...';
            
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã–∑–æ–≤ API –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
            // –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–º–∏—Ç–∞—Ü–∏—é
            
            simulatePaymentProcessing();
        }
        
        // –ò–º–∏—Ç–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–∞
        function simulatePaymentProcessing() {
            showPaymentStatus('processing', '–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞...');
            
            // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ –ø–ª–∞—Ç–µ–∂–∞
            setTimeout(() => {
                // 80% —à–∞–Ω—Å —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞, 20% - –æ—à–∏–±–∫–∞
                const isSuccess = Math.random() > 0.2;
                
                if (isSuccess) {
                    // –£—Å–ø–µ—à–Ω—ã–π –ø–ª–∞—Ç–µ–∂
                    userCoins += selectedCoinAmount;
                    userCoinsElement.textContent = userCoins;
                    saveUserData();
                    
                    showPaymentStatus('success', `–£—Å–ø–µ—à–Ω–æ! –ü–æ–ª—É—á–µ–Ω–æ ${selectedCoinAmount} –º–æ–Ω–µ—Ç`);
                    buyButton.textContent = '–£—Å–ø–µ—à–Ω–æ!';
                    
                    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
                    setTimeout(() => {
                        closeShop();
                    }, 2000);
                } else {
                    // –û—à–∏–±–∫–∞ –ø–ª–∞—Ç–µ–∂–∞
                    showPaymentStatus('error', '–û—à–∏–±–∫–∞ –æ–ø–ª–∞—Ç—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑');
                    buyButton.textContent = '–ö—É–ø–∏—Ç—å';
                    buyButton.disabled = false;
                }
            }, 2000);
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞
        function showPaymentStatus(type, message) {
            paymentStatus.textContent = message;
            paymentStatus.className = 'payment-status';
            
            if (type === 'success') {
                paymentStatus.classList.add('payment-success');
            } else if (type === 'error') {
                paymentStatus.classList.add('payment-error');
            }
            
            paymentStatus.style.display = 'block';
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function loadUserData() {
            const savedData = localStorage.getItem('bitcoin_prediction_user');
            if (savedData) {
                const userData = JSON.parse(savedData);
                correctGuesses = userData.correctGuesses || 0;
                incorrectGuesses = userData.incorrectGuesses || 0;
                predictionHistory = userData.predictionHistory || [];
                userCoins = userData.userCoins || 100;
                
                correctGuessesElement.textContent = correctGuesses;
                incorrectGuessesElement.textContent = incorrectGuesses;
                userCoinsElement.textContent = userCoins;
                updateAccuracy();
                renderHistory();
            }
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            if (tg.initDataUnsafe?.user) {
                const user = tg.initDataUnsafe.user;
                userNameElement.textContent = user.first_name || '–ò–≥—Ä–æ–∫';
                if (user.username) {
                    userNameElement.textContent += ` (@${user.username})`;
                }
            }
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function saveUserData() {
            const userData = {
                correctGuesses,
                incorrectGuesses,
                predictionHistory,
                userCoins
            };
            localStorage.setItem('bitcoin_prediction_user', JSON.stringify(userData));
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Ü–µ–Ω
        async function loadPriceHistory() {
            try {
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å –∫ API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ —Ü–µ–Ω
                // –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                const now = Date.now();
                for (let i = 24; i >= 0; i--) {
                    const time = now - (i * 3600000); // –ö–∞–∂–¥—ã–π —á–∞—Å
                    const price = 30000 + (Math.random() * 10000); // –°–ª—É—á–∞–π–Ω–∞—è —Ü–µ–Ω–∞
                    priceHistory.push({ time, price });
                }
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≥—Ä–∞—Ñ–∏–∫
                initChart();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ —Ü–µ–Ω:', error);
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–∞
        function initChart() {
            const ctx = document.getElementById('price-chart').getContext('2d');
            
            // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞
            const labels = priceHistory.map(item => {
                const date = new Date(item.time);
                return date.getHours() + ':00';
            });
            
            const data = priceHistory.map(item => item.price);
            
            // –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞
            priceChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'BTC/USD',
                        data: data,
                        borderColor: '#ff9900',
                        backgroundColor: 'rgba(255, 153, 0, 0.1)',
                        borderWidth: 2,
                        pointRadius: 2,
                        fill: true,
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: '–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞',
                            color: 'white'
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        y: {
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        }
                    }
                }
            });
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã Bitcoin
        async function fetchBitcoinPrice() {
            try {
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å –∫ API
                // –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
                const changePercent = (Math.random() - 0.5) * 10; // –æ—Ç -5% –¥–æ +5%
                currentPrice = currentPrice || 30000 + (Math.random() * 10000);
                currentPrice = currentPrice * (1 + changePercent / 100);
                
                currentPriceElement.textContent = formatPrice(currentPrice);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã
                const changeElement = priceChangeElement;
                changeElement.textContent = `${changePercent >= 0 ? '+' : ''}${changePercent.toFixed(2)}% (24—á)`;
                changeElement.className = `price-change ${changePercent >= 0 ? 'positive' : 'negative'}`;
                
                return currentPrice;
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω—ã:', error);
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é —Ü–µ–Ω—É –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∞
                currentPrice = 30000 + (Math.random() * 10000);
                currentPriceElement.textContent = formatPrice(currentPrice);
                return currentPrice;
            }
        }
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è "—Å–ª–µ–¥—É—é—â–µ–π" —Ü–µ–Ω—ã
        function generateNextPrice() {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –º–∏–Ω—É—Ç—É
            const changePercent = (Math.random() - 0.5) * 5; // –æ—Ç -2.5% –¥–æ +2.5%
            nextPrice = currentPrice * (1 + changePercent / 100);
        }
        
        // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞
        function startTimer() {
            clearInterval(timerInterval);
            timeLeft = 60;
            
            timerInterval = setInterval(() => {
                timeLeft--;
                timerElement.textContent = `–î–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ${timeLeft} —Å–µ–∫`;
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    canPredict = false;
                    upButton.disabled = true;
                    downButton.disabled = true;
                    timerElement.textContent = '–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞...';
                    
                    // –ß–µ—Ä–µ–∑ —Å–µ–∫—É–Ω–¥—É –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –Ω–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—ã–π —Ä–∞—É–Ω–¥
                    setTimeout(() => {
                        showResult();
                        setTimeout(startNewRound, 3000);
                    }, 1000);
                }
            }, 1000);
        }
        
        // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑
        function makePrediction(direction) {
            if (!canPredict) return;
            if (userCoins <= 0) {
                tg.showPopup({
                    title: '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç',
                    message: '–ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ–≥–Ω–æ–∑',
                    buttons: [{id: 'ok', type: 'default', text: 'OK'}]
                });
                return;
            }
            
            canPredict = false;
            upButton.disabled = true;
            downButton.disabled = true;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const userPrediction = direction;
            
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –Ω—É–∂–Ω–æ –∂–¥–∞—Ç—å —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã
            // –ê –ø–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ü–µ–Ω—É
            generateNextPrice();
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
            const actualDirection = nextPrice > currentPrice ? 'up' : 'down';
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —É–≥–∞–¥–∞–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
            const isCorrect = userPrediction === actualDirection;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç
            if (isCorrect) {
                correctGuesses++;
                correctGuessesElement.textContent = correctGuesses;
                userCoins += 20; // –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑
            } else {
                incorrectGuesses++;
                incorrectGuessesElement.textContent = incorrectGuesses;
                userCoins -= 10; // –®—Ç—Ä–∞—Ñ –∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑
            }
            
            userCoinsElement.textContent = userCoins;
            updateAccuracy();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–≥–Ω–æ–∑ –≤ –∏—Å—Ç–æ—Ä–∏—é
            const prediction = {
                time: Date.now(),
                userPrediction,
                actualDirection,
                isCorrect,
                oldPrice: currentPrice,
                newPrice: nextPrice,
                reward: isCorrect ? 20 : -10
            };
            
            predictionHistory.unshift(prediction);
            if (predictionHistory.length > 10) {
                predictionHistory.pop();
            }
            
            renderHistory();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–∫–∞–∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            window.lastRoundData = prediction;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            saveUserData();
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
        function updateAccuracy() {
            const total = correctGuesses + incorrectGuesses;
            const accuracy = total > 0 ? Math.round((correctGuesses / total) * 100) : 0;
            accuracyElement.textContent = `${accuracy}%`;
        }
        
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
        function renderHistory() {
            historyListElement.innerHTML = '';
            
            if (predictionHistory.length === 0) {
                historyListElement.innerHTML = '<p>–ü–æ–∫–∞ –Ω–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤</p>';
                return;
            }
            
            predictionHistory.forEach(prediction => {
                const item = document.createElement('div');
                item.className = 'history-item';
                
                const date = new Date(prediction.time);
                const timeString = date.toLocaleTimeString();
                
                const change = ((prediction.newPrice - prediction.oldPrice) / prediction.oldPrice * 100).toFixed(2);
                const changeText = change >= 0 ? `+${change}%` : `${change}%`;
                
                item.innerHTML = `
                    <div>${timeString}</div>
                    <div>${prediction.userPrediction === 'up' ? '‚ñ≤' : '‚ñº'}</div>
                    <div class="${prediction.isCorrect ? 'history-correct' : 'history-incorrect'}">
                        ${prediction.isCorrect ? '‚úì' : '‚úó'} ${changeText}
                    </div>
                    <div>${prediction.reward > 0 ? '+' : ''}${prediction.reward} ü™ô</div>
                `;
                
                historyListElement.appendChild(item);
            });
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—É–Ω–¥–∞
        function showResult() {
            const { userPrediction, actualDirection, isCorrect, oldPrice, newPrice, reward } = window.lastRoundData;
            
            resultElement.className = isCorrect ? 'result win' : 'result lose';
            
            const change = ((newPrice - oldPrice) / oldPrice * 100).toFixed(2);
            const changeText = change >= 0 ? `+${change}%` : `${change}%`;
            
            resultElement.innerHTML = `
                <h2>${isCorrect ? '‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!' : '‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ'}</h2>
                <p>–í—ã –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–ª–∏: <strong>${userPrediction === 'up' ? '—Ä–æ—Å—Ç' : '–ø–∞–¥–µ–Ω–∏–µ'}</strong></p>
                <p>–§–∞–∫—Ç–∏—á–µ—Å–∫–∏: <strong>${actualDirection === 'up' ? '—Ä–æ—Å—Ç' : '–ø–∞–¥–µ–Ω–∏–µ'} (${changeText})</strong></p>
                <p>–ù–æ–≤–∞—è —Ü–µ–Ω–∞: <strong>${formatPrice(newPrice)}</strong></p>
                <p>${reward > 0 ? '–ü–æ–ª—É—á–µ–Ω–æ' : '–ü–æ—Ç–µ—Ä—è–Ω–æ'}: <strong>${Math.abs(reward)} ü™ô</strong></p>
            `;
            
            resultElement.style.display = 'block';
        }
        
        // –ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π —Ä–∞—É–Ω–¥
        async function startNewRound() {
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É
            currentPrice = nextPrice;
            currentPriceElement.textContent = formatPrice(currentPrice);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é —Ü–µ–Ω—É –≤ –∏—Å—Ç–æ—Ä–∏—é
            const now = Date.now();
            priceHistory.push({ time: now, price: currentPrice });
            priceHistory.shift(); // –£–¥–∞–ª—è–µ–º —Å–∞–º—É—é —Å—Ç–∞—Ä—É—é —Ü–µ–Ω—É
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≥—Ä–∞—Ñ–∏–∫
            if (priceChart) {
                priceChart.data.labels.push(new Date(now).getHours() + ':00');
                priceChart.data.labels.shift();
                priceChart.data.datasets[0].data.push(currentPrice);
                priceChart.data.datasets[0].data.shift();
                priceChart.update();
            }
            
            // –ü–æ–ª—É—á–∞–µ–º –Ω–æ–≤—É—é —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É
            await fetchBitcoinPrice();
            
            resultElement.style.display = 'none';
            upButton.disabled = false;
            downButton.disabled = false;
            canPredict = true;
            
            startTimer();
        }
        
        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω—ã
        function formatPrice(price) {
            return '$' + price.toFixed(2);
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤
        function loadLeaderboard() {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É
            // –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–µ–º —Ñ–∏–∫—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            const leaderboardData = [
                { name: '–°–∞—Ç–æ—à–∏ –ù–∞–∫–∞–º–æ—Ç–æ', score: 250 },
                { name: '–ò–ª–æ–Ω –ú–∞—Å–∫', score: 180 },
                { name: '–í–∏—Ç–∞–ª–∏–∫ –ë—É—Ç–µ—Ä–∏–Ω', score: 165 },
                { name: '–ú–∞–π–∫–ª –°–µ–π–ª–æ—Ä', score: 140 },
                { name: '–í—ã', score: userCoins },
                { name: '–ß–∞—Ä–ª–∏ –õ–∏', score: 95 },
                { name: '–ë–∞—Ä—Ä–∏ –°–∏–ª–±–µ—Ä—Ç', score: 80 },
                { name: '–ö—ç–º–µ—Ä–æ–Ω –£–∏–Ω–∫–ª–≤–æ—Å—Å', score: 75 },
                { name: '–¢–∞–π–ª–µ—Ä –£–∏–Ω–∫–ª–≤–æ—Å—Å', score: 70 },
                { name: '–ë—Ä–∞–π–∞–Ω –ê—Ä–º—Å—Ç—Ä–æ–Ω–≥', score: 65 }
            ];
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –æ—á–∫–∞–º
            leaderboardData.sort((a, b) => b.score - a.score);
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤
            leaderboardListElement.innerHTML = '';
            leaderboardData.forEach((item, index) => {
                const leaderboardItem = document.createElement('div');
                leaderboardItem.className = 'leaderboard-item';
                if (item.name === '–í—ã') {
                    leaderboardItem.style.backgroundColor = 'rgba(255, 153, 0, 0.2)';
                }
                
                leaderboardItem.innerHTML = `
                    <div class="leaderboard-rank">${index + 1}</div>
                    <div class="leaderboard-name">${item.name}</div>
                    <div class="leaderboard-score">${item.score} ü™ô</div>
                `;
                
                leaderboardListElement.appendChild(leaderboardItem);
            });
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏
        function switchTab(tabIndex) {
            // –î–µ–ª–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–º–∏
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.querySelectorAll('.tab')[tabIndex].classList.add('active');
            document.querySelectorAll('.tab-content')[tabIndex].classList.add('active');
            
            // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ –ª–∏–¥–µ—Ä–æ–≤, –æ–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–±–ª–∏—Ü—É
            if (tabIndex === 2) {
                loadLeaderboard();
            }
        }
        
        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
